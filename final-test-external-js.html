<!DOCTYPE html>
<html>
<head>
    <title>Final WordPress Duplication Fix Test</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="assets/js/file-upload-v4.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .test-section { margin: 30px 0; padding: 25px; border: 3px solid #e74c3c; border-radius: 10px; background: linear-gradient(135deg, #ffeaa7, #fab1a0); }
        .file-upload-area { 
            border: 3px dashed #0984e3; 
            padding: 30px; 
            text-align: center; 
            margin: 20px 0; 
            border-radius: 10px;
            position: relative;
            background: linear-gradient(135deg, #dff9fb, #c7ecee);
        }
        .file-upload-area input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        .file-preview { 
            margin: 25px 0; 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); 
            gap: 20px; 
            min-height: 80px;
            border: 3px solid #00b894;
            padding: 20px;
            border-radius: 10px;
            background: linear-gradient(135deg, #e8f5e8, #d1f2eb);
        }
        .file-preview-item { 
            background: linear-gradient(135deg, #74b9ff, #0984e3); 
            border: 2px solid #0984e3; 
            border-radius: 10px; 
            padding: 20px; 
            text-align: center; 
            position: relative;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .file-preview-item img { 
            max-width: 100%; 
            max-height: 120px; 
            border-radius: 8px; 
            border: 2px solid white;
        }
        .file-name { 
            font-size: 14px; 
            margin-top: 10px; 
            word-break: break-all; 
            font-weight: bold;
            background: rgba(255,255,255,0.9);
            color: #2d3436;
            padding: 8px;
            border-radius: 6px;
        }
        .file-remove { 
            position: absolute; 
            top: -10px; 
            right: -10px; 
            background: #e17055; 
            color: white; 
            border: none; 
            border-radius: 50%; 
            width: 30px; 
            height: 30px; 
            cursor: pointer; 
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        .file-remove:hover { background: #d63031; transform: scale(1.1); }
        h1 { color: #2d3436; text-align: center; margin-bottom: 30px; font-size: 2.5em; }
        h2 { color: #e17055; border-bottom: 3px solid #e17055; padding-bottom: 10px; font-size: 1.5em; }
        .success-msg { background: #00b894; color: white; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéâ FINAL WordPress Duplication Fix Test</h1>
        
        <div class="success-msg">
            ‚úÖ This test uses the EXACT SAME external JavaScript file as WordPress<br>
            üìÅ File: assets/js/file-upload-v4.js (v4.0 DUPLICATE PREVENTION)
        </div>
        
        <div class="test-section">
            <h2>üéØ Test: Tire Images (Multiple Upload)</h2>
            <div class="file-upload-area">
                <input type="file" id="tire_images" name="tire_images[]" multiple accept="image/*">
                <p><strong>üì∏ SELECT 2-3 DIFFERENT IMAGES</strong></p>
                <small>Each should show its UNIQUE filename - NO DUPLICATES!</small>
            </div>
            <div id="tire-images-preview" class="file-preview"></div>
        </div>

        <div class="test-section">
            <h2>üéØ Test: Receipt/Invoice (Single Upload)</h2>
            <div class="file-upload-area">
                <input type="file" id="receipt_image" name="receipt_image" accept="image/*,.pdf">
                <p><strong>üìÑ SELECT ONE RECEIPT/INVOICE</strong></p>
                <small>Should show correct filename</small>
            </div>
            <div id="receipt-preview" class="file-preview"></div>
        </div>

        <div class="test-section">
            <h2>üéØ Test: Additional Files (Multiple + Documents)</h2>
            <div class="file-upload-area">
                <input type="file" id="additional_files" name="additional_files[]" multiple accept="image/*,.pdf,.doc,.docx,.txt,.rtf,.odt">
                <p><strong>üìé SELECT VARIOUS FILE TYPES</strong></p>
                <small>Images, PDFs, Word docs, text files all supported</small>
            </div>
            <div id="additional-files-preview" class="file-preview"></div>
        </div>
    </div>
    
    <div style="margin: 30px auto; max-width: 800px; padding: 30px; background: linear-gradient(135deg, #00b894, #00a085); color: white; border-radius: 15px; text-align: center;">
        <h3>üîç CRITICAL TEST RESULTS:</h3>
        <div style="background: rgba(255,255,255,0.2); padding: 20px; border-radius: 10px; margin: 15px 0;">
            <strong>‚úÖ IF THIS TEST WORKS:</strong> External JS file approach is correct<br>
            <strong>‚ùå IF WORDPRESS STILL DUPLICATES:</strong> There's a WordPress-specific conflict
        </div>
        
        <div style="background: rgba(255,255,255,0.15); padding: 15px; border-radius: 8px;">
            <strong>üöÄ v4.0 FEATURES:</strong><br>
            ‚Ä¢ Global initialization prevention<br>
            ‚Ä¢ Input-level duplicate detection<br>
            ‚Ä¢ Unique file IDs<br>
            ‚Ä¢ Enhanced console logging<br>
            ‚Ä¢ Complete event handler cleanup
        </div>
    </div>
</body>
</html>
